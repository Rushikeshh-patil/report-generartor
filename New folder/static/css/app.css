/* CA Track â€“ Modern UI */
:root{
  --bg: #0b0e14;
  --bg-elev: rgba(255,255,255,0.04);
  --card: #121826;
  --text: #e5e7eb;
  --muted: #9aa4b2;
  --primary: #7c5cff;
  --accent: #00d4ff;
  --border: rgba(255,255,255,0.1);
  --good: #22c55e; --warn:#f59e0b; --bad:#ef4444;
  color-scheme: dark;
}
[data-theme="light"]{
  --bg:#f6f7fb; --bg-elev:#ffffffcc; --card:#ffffff; --text:#0f172a; --muted:#475569; --border:#e5e7eb; --primary:#5b7bff; --accent:#0ea5e9;
  color-scheme: light;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text); background: radial-gradient(1200px 600px at 10% -10%, rgba(124,92,255,.25), transparent 60%), radial-gradient(1000px 600px at 110% -20%, rgba(14,165,233,.25), transparent 60%), var(--bg); overflow-x:hidden}

.topbar{position:sticky; top:0; z-index:20; display:flex; align-items:center; gap:.75rem; padding:.6rem 1rem; backdrop-filter:saturate(140%) blur(8px); background:linear-gradient(90deg, var(--bg-elev), transparent); border-bottom:1px solid var(--border)}
.brand{font-weight:800; letter-spacing:.4px; color:var(--text); text-decoration:none}
.nav{display:flex; gap:.4rem}
.nav-link{color:var(--muted); text-decoration:none; padding:.4rem .6rem; border-radius:.45rem}
.nav-link:hover{background:var(--bg-elev); color:var(--text)}
.spacer{flex:1}
.user-chip{font-size:.9rem; color:var(--muted); padding:.2rem .5rem; border:1px solid var(--border); border-radius:999px}

.app-grid{display:grid; grid-template-columns: 1fr;}
.sidebar{display:none}
.container{padding: 24px 20px; max-width: none; width: 100%; margin: 0}
.grid{display:grid; gap:12px}
.grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid-4{grid-template-columns:repeat(4,minmax(0,1fr))}
.card{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow: 0 8px 28px rgba(0,0,0,.15)}
.card h3{margin:.2rem 0 .8rem 0}

.stats{display:grid; gap:12px}
.stats .stat{background:linear-gradient(180deg, rgba(124,92,255,.12), rgba(124,92,255,0) 60%), var(--card); border:1px solid var(--border); border-radius:14px; padding:14px}
.stat .kpi{font-size:28px; font-weight:800}
.stat .label{color:var(--muted); font-size:.85rem}
.stat.warn{background:linear-gradient(180deg, rgba(245,158,11,.15), rgba(245,158,11,0) 60%), var(--card)}
.stat.bad{background:linear-gradient(180deg, rgba(239,68,68,.15), rgba(239,68,68,0) 60%), var(--card)}

.filters{margin: 14px 0}
.filters form{display:flex; flex-wrap:wrap; gap:10px; align-items:end}
.filters label{display:flex; flex-direction:column; font-size:.8rem; color:var(--muted)}
/* Pretty forms */
.form-card{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow: 0 8px 28px rgba(0,0,0,.15)}
.form-grid{display:grid; gap:12px}
.form-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.form-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.form-field{display:flex; flex-direction:column; gap:6px}
.form-field .caption{font-size:.8rem; color:var(--muted)}
.form-actions{display:flex; gap:10px; align-items:center; margin-top:10px}
.errorlist{list-style:none; padding:0; margin:6px 0; color:var(--bad)}
.helptext{font-size:.75rem; color:var(--muted)}
input, select, textarea{background:transparent; color:var(--text); border:1px solid var(--border); padding:.5rem .6rem; border-radius:10px; max-width:100%}
/* Improve native control rendering in dark mode */
[data-theme="dark"] select,[data-theme="dark"] input,[data-theme="dark"] textarea{background-color:#0f1421; border-color:#273447; color:#e5e7eb}
[data-theme="dark"] option{background-color:#0f1421; color:#e5e7eb}
select:focus,input:focus,textarea:focus{outline:2px solid var(--accent); outline-offset:2px}
input[type="date"]{min-width:10.5em}
button, .btn{cursor:pointer; border:1px solid var(--border); background:var(--bg-elev); color:var(--text); padding:.5rem .8rem; border-radius:10px; text-decoration:none}
.btn-primary{background:linear-gradient(180deg, var(--primary), #6a4eff); border-color:transparent; color:#fff; text-decoration:none}
.btn-ghost{background:transparent; text-decoration:none}
.btn-sm{padding:.25rem .5rem; font-size:.85rem; border-radius:.5rem}
.btn-icon{padding:.25rem; width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center}
button:hover,.btn:hover{filter:brightness(1.05)}

table{width:100%; max-width:100%; border-collapse:separate; border-spacing:0; background:var(--card); border:1px solid var(--border); border-radius:14px; overflow:hidden; table-layout:auto}
th,td{padding:.6rem .7rem; border-bottom:1px solid var(--border); text-align:left}
thead th{position:sticky; top:0; background:linear-gradient(180deg, var(--bg-elev), transparent); color:var(--muted); font-weight:600}
tbody tr:hover{background:rgba(255,255,255,.03)}

.badge{display:inline-block; padding:.18rem .5rem; border-radius:999px; font-size:.75rem; border:1px solid var(--border)}
.status-in_review,.status-in-review{background:rgba(59,130,246,.15); color:#93c5fd}
.status-ready_pic_review,.status-ready-pic-review{background:rgba(14,165,233,.15); color:#67e8f9}
.status-ready_to_return,.status-ready-to-return{background:rgba(245,158,11,.15); color:#facc15}
.status-returned{background:rgba(34,197,94,.15); color:#86efac}
.status-void{background:rgba(148,163,184,.15); color:#cbd5e1}

.overdue{color:var(--bad); font-weight:700}
.pagination{margin-top:10px; display:flex; gap:10px; align-items:center}

.chart-card{padding:0}
.chart-card canvas{display:block}

/* Responsive */
@media (max-width: 920px){
  .grid-4{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid-3{grid-template-columns:repeat(1,minmax(0,1fr))}
}

@media (min-width: 1200px){
  .app-grid{grid-template-columns: 240px 1fr}
  .sidebar{display:block; position:sticky; top:56px; height: calc(100vh - 56px); padding: 12px 8px; border-right:1px solid var(--border); background: linear-gradient(180deg, var(--bg-elev), transparent)}
  .topbar .nav{display:none}
}

.side-nav{display:flex; flex-direction:column; gap:6px}
.side-link{display:flex; align-items:center; gap:.6rem; text-decoration:none; color:var(--muted); padding:.5rem .75rem; border-radius:.6rem}
.side-link:hover{background:var(--bg-elev); color:var(--text)}

/* Toasts */
#toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:50}
.toast{background:var(--card); color:var(--text); border:1px solid var(--border); padding:.6rem .8rem; border-radius:.75rem; box-shadow:0 8px 24px rgba(0,0,0,.2)}
.toast.good{border-color: rgba(34,197,94,.4)}
.toast.bad{border-color: rgba(239,68,68,.4)}

/* Inline edit */
.inline-edit{display:flex; align-items:center; gap:.4rem}
.inline-edit .display{background:transparent; border:none; color:var(--text); padding:0; cursor:pointer}
.inline-edit .display .label{border-bottom:1px dotted var(--border)}
.inline-edit .editor{display:none}
.inline-edit.active .display{display:none}
.inline-edit.active .editor{display:inline-flex}
