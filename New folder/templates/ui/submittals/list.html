{% extends 'base.html' %}
{% block content %}
<h1>Submittals</h1>
<div style="margin-bottom:8px; display:flex; gap:8px; align-items:center;">
  <a class="btn btn-primary" href="{% url 'ui:submittal-create' %}">+ New Submittal</a>
  <a class="btn btn-ghost" href="/api/submittals/export.csv?{{ request.GET.urlencode }}">Export CSV</a>
  <a class="btn btn-ghost" href="/api/submittals/?{{ request.GET.urlencode }}">API</a>
  </div>
<div class="filters">
  <form hx-get="" hx-target="#submittals-table" hx-trigger="change, keyup delay:300ms, submit" hx-push-url="true">
    <label>Project {{ form.project }}</label>
    <label>Status {{ form.status }}</label>
    <label>Assigned PM {{ form.assigned_pm }}</label>
    <label>Originator {{ form.originator }}</label>
    <label>Received From {{ form.date_received_from }}</label>
    <label>Received To {{ form.date_received_to }}</label>
    <label>Due From {{ form.due_from }}</label>
    <label>Due To {{ form.due_to }}</label>
    <label>Overdue {{ form.overdue }}</label>
    <button type="submit">Filter</button>
  </form>
  <div id="submittals-table" hx-get="" hx-trigger="load">
    {% include 'ui/submittals/_table.html' %}
  </div>
{% endblock %}
